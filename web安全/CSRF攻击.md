# CSRF(跨站请求伪造) 攻击

原理是攻击者构造网站后台某个接口的请求地址，诱导用户去点击或者用特殊方法让该请求地址自动加载。用户在登录状态下这个请求被服务端接受后会被误以为是用户合法操作。对于get形式的接口地址可轻易被攻击，对于post形式的接口地址也不是百分百安全，攻击者可诱导用户进入 带form表单可用post方式提交参数的页面


* 方案
    服务端在收到路由请求时，生成一个随机数，在渲染请求页面时把随机数埋入页面（一般埋入 form 表单内，<input type="hidden" name="_csrf_token" value="xxxx">）
    服务端设置setCookie，把该随机数作为cookie或者session种入用户浏览器
    当用户发送 GET 或者 POST 请求时带上_csrf_token参数（对于 Form 表单直接提交即可，因为会自动把当前表单内所有的 input 提交给后台，包括_csrf_token）
    后台在接受到请求后解析请求的cookie获取_csrf_token的值，然后和用户请求提交的_csrf_token做个比较，如果相等表示请求是合法的。